<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="file">
	<resultMap id="fileInfoList" type="hashmap">
		<result property="file_name" column="FILE_NAME" javaType="java.lang.String"/>
		<result property="member_no" column="MEMBER_NO" javaType="java.lang.String"/>
		<result property="group_file_no" column="GROUP_FILE_NO" javaType="int"/>
	
	</resultMap>
	
	<resultMap id="downFileInfo" type="hashmap" >
		<result property="file_path" column="FILE_PATH" javaType="java.lang.String"/>
		<result property="file_name" column="FILE_NAME" javaType="java.lang.String"/>
	</resultMap>
	
	<!-- Upload 관련 query -->
	<insert id="insertFile" parameterType="hashmap">
	    INSERT INTO GROUP_FILE_TB (MEMBER_NO, GROUP_NO, UPLOAD_DATE, FILE_NAME, FILE_PATH) VALUES (12, 3, current_timestamp, #{FILE_ORIGINAL_NAME}, #{FILE_STORED_NAME})	 
	</insert>

	<!--  Download 관련 query -->
	<select id="selectFilePath" parameterType="java.lang.String" resultMap="downFileInfo">
        SELECT FILE_PATH, FILE_NAME FROM GROUP_FILE_TB WHERE GROUP_FILE_NO = #{fno}
	</select>
	
	<!-- group File List 관련 query -->
	<select id="selectAllFileList" resultMap="fileInfoList">
		SELECT FILE_NAME, MEMBER_NO, GROUP_FILE_NO from GROUP_FILE_TB ORDER BY GROUP_FILE_NO ASC;
	</select>
	
	<!-- email 인증 관련 query -->	
	<select id="getCountCode" parameterType="java.lang.String"  resultType="java.lang.Integer">
       SELECT count(*) from CODE_TB WHERE key_no=#{code}
	</select>
	
</mapper>

